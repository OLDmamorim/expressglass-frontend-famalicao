/* ========== BASE ========== */
* { box-sizing: border-box; }
html, body { max-width: 100vw; overflow-x: hidden; }
body {
  font-family: Arial, Helvetica, sans-serif;
  margin: 20px; background:#f6f7fb; color:#1f2937;
}

/* Header */
.page-header {
  position: relative;
  background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
  color: white;
  padding: 20px;
  border-radius: 10px;
  margin-bottom: 20px;
}
.page-header h1 { margin:0; font-size:28px; font-weight:800; text-align:center }
.subtitle { margin:4px 0 10px; text-align:center; color:#e5edff }

.header-actions {
  position: absolute; top: 15px; right: 20px;
  display: flex; gap: 8px;
}
.header-btn {
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 16px;
  transition: all .2s ease;
}
.header-btn:hover { background: rgba(255,255,255,.3); transform: translateY(-1px); }
.connection-status{
  display:flex; align-items:center; gap:6px;
  background: rgba(255,255,255,.15); border:1px solid rgba(255,255,255,.25);
  color:#fff; padding:6px 10px; border-radius:6px; font-size:12px; font-weight:600; letter-spacing:.5px;
}
.connection-status.offline { background: rgba(239,68,68,.2); border-color: rgba(239,68,68,.3); }

/* ========== NAV ========== */
.nav-bar{display:flex; align-items:center; gap:10px; margin:12px 0; flex-wrap:wrap}
.nav-left,.nav-right{display:flex; gap:10px}
.week-range{flex:1; text-align:center; font-weight:600; color:#374151}
.nav-button{ background:#fff; border:1px solid #e5e7eb; border-radius:8px; padding:8px 12px; cursor:pointer }
.nav-button.small{padding:10px 12px; font-size:14px}
.nav-button.full{width:100%}

/* ========== SEARCH BAR ========== */
.search-bar {
  background: #f8fafc; border-bottom: 1px solid #e2e8f0; padding: 12px 20px;
  display: flex; align-items: center; gap: 10px; border-radius: 8px; margin-bottom: 15px;
}
.search-bar.hidden { display: none; }
#searchInput {
  flex: 1; padding: 10px 16px; border:1px solid #d1d5db; border-radius:8px; font-size:14px; outline:none;
}
#searchInput:focus { border-color:#3b82f6; box-shadow:0 0 0 3px rgba(59,130,246,.1); }
.search-clear {
  background:#ef4444; color:#fff; border:none; padding:8px 12px; border-radius:6px; cursor:pointer; font-size:14px;
}
.search-clear:hover{ background:#dc2626; }

/* ========== CALENDÁRIO ========== */
.schedule-container{background:#fff; border:1px solid #e5e7eb; border-radius:10px; padding:0; box-shadow:0 2px 4px rgba(0,0,0,.04)}
table.schedule{width:100%; border-collapse:collapse; table-layout:fixed}
table.schedule thead th{
  background:#f9fafb; text-align:center; font-weight:600; border-bottom:1px solid #e5e7eb; line-height:1.2; padding:10px 6px
}
table.schedule th .day{font-size:16px; color:#374151}
table.schedule th .date{font-size:12px; color:#6b7280}
table.schedule th:first-child{width:90px; text-align:left}
table.schedule tbody th{background:#f9fafb; text-align:left; padding:14px 10px; font-weight:600; color:#374151; width:90px}
table.schedule td{min-height:120px; border-left:1px solid #e5e7eb; border-bottom:1px solid #e5e7eb; vertical-align:top; padding:8px}
table.schedule td:first-child{border-left:none}

/* Drop zones */
.drop-zone { min-height: 70px; border:2px dashed transparent; border-radius:8px; padding:4px; transition:all .2s ease; }
.drop-zone.drag-over { border-color:#3b82f6; background:rgba(59,130,246,.08); }

/* Cards */
.appointment{ display:inline-block; border-radius:8px; padding:6px 8px; margin:4px 0; font-size:12px; color:#111827; max-width:100%; }
.appointment-block { border-radius:6px; box-shadow:0 2px 4px rgba(0,0,0,.1); transition:all .2s ease; margin-bottom:8px; }
.appointment-block:hover { transform: translateY(-1px); box-shadow:0 4px 8px rgba(0,0,0,.15); }
.appt-header{font-weight:700; margin-bottom:2px}
.appt-sub{color:#374151; font-size:12px; margin-bottom:6px}

/* Estado (NE/VE/ST) como chips */
.chip{display:inline-block; padding:2px 8px; border-radius:999px; font-size:12px; font-weight:700; color:#111}
.chip-NE{background:#fee2e2; color:#b91c1c}
.chip-VE{background:#fef3c7; color:#b45309}
.chip-ST{background:#d1fae5; color:#065f46}

/* ========== SERVIÇOS POR AGENDAR ========== */
.unscheduled-container{
  background:#fff; border:1px solid #e5e7eb; border-radius:10px; box-shadow:0 2px 4px rgba(0,0,0,.04);
  padding:16px; margin:16px 0 20px;
}
.unscheduled-container h3{margin:0 0 10px; font-size:18px}
.unscheduled-actions{ display:flex; gap:8px; margin-bottom:10px; justify-content:space-between; align-items:center }
.action-btn{ padding:10px 20px; border:none; border-radius:6px; cursor:pointer; font-weight:500; transition:all .2s ease; }
.action-btn.primary{ background:#3b82f6; color:#fff; }
.action-btn.primary:hover{ background:#2563eb; transform: translateY(-1px); }
.filter-select { padding:8px 12px; border:1px solid #d1d5db; border-radius:6px; background:#fff; font-size:14px; }

/* Layout horizontal simples e estável */
.unscheduled-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 16px;
  align-items: start;
}
.appointment.unscheduled {
  display:flex; flex-direction:column; width:100%; min-height:120px; padding:12px; border-radius:8px;
  box-shadow:0 1px 3px rgba(0,0,0,.1); transition: all .2s ease;
}
.unscheduled-actions { display:flex; gap:8px; margin-top:auto; }

/* ========== TABELA “SERVIÇOS A REALIZAR” ========== */
.services-table-container{
  background:#fff; border:1px solid #e5e7eb; border-radius:10px; box-shadow:0 2px 4px rgba(0,0,0,.04);
  padding:20px; margin:22px 0 30px;
}
.services-table-container h3{margin:0 0 6px; font-size:20px}
.services-summary { display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; padding:10px 0; }
.export-btn { background:#10b981; color:#fff; border:none; padding:8px 16px; border-radius:6px; cursor:pointer; font-size:14px; }
.export-btn:hover { background:#059669; }
.services-table{width:100%; border-collapse:collapse}
.services-table th,.services-table td{border-bottom:1px solid #eee; padding:10px 8px; font-size:14px}
.services-table thead th{background:#f9fafb; font-weight:600}
.badge{display:inline-block; padding:2px 6px; border-radius:6px; font-size:12px; font-weight:700; color:#111}
.badge-PB{background:#dbeafe} .badge-LT{background:#fde68a}
.badge-OC{background:#fcd34d} .badge-REP{background:#ddd6fe}
.badge-POL{background:#bbf7d0}
.actions{display:flex; gap:8px; align-items:center}
.actions .icon{border:none; background:transparent; cursor:pointer; font-size:16px; line-height:1}
.actions .delete{color:#dc2626}
.actions .edit{color:#374151}

/* ========== FORMULÁRIO / MODAIS ========== */
.form-row{ display:grid; grid-template-columns: repeat(4, 1fr); gap:12px; }
.form-group{ display:flex; flex-direction:column; margin-bottom:10px; }
.form-group label{ font-weight:500; margin-bottom:4px; }
.form-group input, .form-group select, .form-group textarea{
  width:100%; padding:8px 10px; border:1px solid #cbd5e1; border-radius:6px; font-size:16px;
}
.form-hint { display:block; font-size:12px; color:#6b7280; margin-top:4px; }
.form-actions { display:flex; gap:10px; justify-content:flex-end; margin-top:20px; }
.btn { padding:10px 20px; border:none; border-radius:6px; cursor:pointer; font-weight:500; transition:all .2s ease; }
.btn.primary{ background:#3b82f6; color:#fff; } .btn.primary:hover{ background:#2563eb; }
.btn.secondary{ background:#6b7280; color:#fff; } .btn.secondary:hover{ background:#4b5563; }
.btn.danger{ background:#ef4444; color:#fff; } .btn.danger:hover{ background:#dc2626; }

/* Modal */
.modal{ display:none; position:fixed; inset:0; background:rgba(0,0,0,.5); z-index:1000; backdrop-filter: blur(4px); }
.modal.show{ display:flex; align-items:center; justify-content:center; }
.modal-content{ background:#fff; border-radius:12px; max-width:600px; width:90%; max-height:90vh; overflow-y:auto; box-shadow:0 20px 25px -5px rgba(0,0,0,.1); }
.modal-header{ display:flex; justify-content:space-between; align-items:center; padding:20px 24px; border-bottom:1px solid #e5e7eb; }
.modal-header h3{ margin:0; font-size:18px; font-weight:600; }
.close-btn{ background:none; border:none; font-size:20px; cursor:pointer; color:#6b7280; padding:4px; border-radius:4px; }
.close-btn:hover{ color:#374151; background:#f3f4f6; }
.appointment-form{ padding:24px; }

/* Toasts */
.toast-container{ position:fixed; top:20px; right:20px; z-index:2000; }
.toast{
  background:#fff; border:1px solid #e5e7eb; border-radius:8px; padding:12px 16px; margin-bottom:8px;
  box-shadow:0 4px 6px -1px rgba(0,0,0,.1); display:flex; align-items:center; gap:8px; min-width:300px;
}
.toast.success{ border-left:4px solid #10b981; }
.toast.error{ border-left:4px solid #ef4444; }
.toast.info{ border-left:4px solid #3b82f6; }

.hidden{ display:none !important; }
.loading{ opacity:.6; pointer-events:none; }
.highlight{ background:#fef3c7 !important; border:2px solid #f59e0b !important; }

/* ========== RESPONSIVO ========== */
@media (max-width: 1100px){
  .form-row{ grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 820px){
  body{margin:12px}
  /* No mobile: escondemos o calendário de mesa e a tabela longa */
  .schedule-container, .services-table-container{ display:none !important; }
  .unscheduled-container{ display:none !important; } /* no mobile mostrarmos só a vista diária */
  .nav-left button#prevWeek, .nav-left button#nextWeek, .nav-right{display:none}
  .week-range{font-size:14px}
  .mobile-day-container{ display:block !important; }
  .mobile-day-header{ margin-top: 6px; }
  .mobile-day-label{ font-weight:600; text-align:center; margin-bottom:8px; }
  .mobile-day-buttons{ display:grid; grid-template-columns: repeat(3, 1fr); gap:8px; }
  .mobile-day-buttons .nav-button{ width:100%; padding:12px 10px; text-align:center; }
}

/* ========== IMPRESSÃO ========== */
@media print{
  body{margin:0; background:#fff}
  .header-actions, .search-bar, .unscheduled-actions, .mobile-add-btn, .export-btn, .no-print { display:none !important; }
  .nav-bar, .mobile-day-container { display:none !important; }
  .appt-status{display:none !important}
  .form-container, .unscheduled-container{display:none !important}
  .print-page-1{page-break-after: always;}
  .print-page-2{page-break-before: always;}
  .print-page-3{page-break-before: always;}

  /* Seção “Serviços por agendar” (impressão) */
  .print-unscheduled-section { display:block !important; page-break-before:always; margin:0; padding:20px; }
  .print-unscheduled-table { width:100%; border-collapse:collapse; font-size:12px; }
  .print-unscheduled-table th, .print-unscheduled-table td { border:1px solid #000; padding:8px; text-align:left; }
  .print-unscheduled-table th { background:#f0f0f0; font-weight:bold; text-align:center; }

  /* Seção “Serviços de Amanhã” (impressão) */
  .print-tomorrow-section { display:block !important; page-break-before:always; margin:0; padding:20px; }
  .print-tomorrow-table { width:100%; border-collapse:collapse; font-size:12px; }
  .print-tomorrow-table th, .print-tomorrow-table td { border:1px solid #000; padding:8px; text-align:left; }
  .print-tomorrow-table th { background:#f0f0f0; font-weight:bold; text-align:center; }
}
/* === MOBILE CARDS (<=640px) === */
@media (max-width: 640px) {
  :root{
    --status-NE: #e74c3c;   /* Não Encomendado */
    --status-VE: #f39c12;   /* Vidro Encomendado */
    --status-ST: #2ecc71;   /* Stock */
    --card-fg: #ffffff;
    --chip-bg: rgba(255,255,255,.22);
    --chip-fg: #fff;
    --shadow-strong: 0 12px 30px rgba(0,0,0,.18);
    --shadow-soft: 0 4px 14px rgba(0,0,0,.10);
    --radius-xl: 18px;
  }

  /* wrapper da lista do dia, caso precises de espaçamento */
  .day-list { padding: 0 16px 80px; }

  /* CARTÃO */
  .job-card{
    position: relative;
    border-radius: var(--radius-xl);
    color: var(--card-fg);
    padding: 16px;
    margin: 14px 0;
    box-shadow: var(--shadow-strong);
    overflow: hidden;
  }
  /* gradientes por status (cor principal = status) */
  .job-card.status-NE{
    background: linear-gradient(160deg, var(--status-NE) 0%, #c0392b 100%);
  }
  .job-card.status-VE{
    background: linear-gradient(160deg, var(--status-VE) 0%, #d35400 100%);
  }
  .job-card.status-ST{
    background: linear-gradient(160deg, var(--status-ST) 0%, #27ae60 100%);
  }

  /* HEADER: matrícula | seguradora | modelo resumido */
  .job-hd{
    display: flex; align-items: center; gap: 10px;
    font-weight: 800; font-size: 1.25rem; letter-spacing: .3px;
    margin-bottom: 10px;
  }
  .job-hd .icon{ font-size: 1.2rem; opacity: .9 }
  .job-sub{
    font-size: .9rem; opacity: .9; margin-top: -2px;
  }

  /* CHIPS (pills) */
  .chips{ display:flex; flex-wrap: wrap; gap:8px; margin: 10px 0 12px }
  .chip{
    background: var(--chip-bg); color: var(--chip-fg);
    padding: 7px 12px; border-radius: 999px; font-size: .9rem; font-weight: 600;
    backdrop-filter: blur(2px);
  }

  /* LINHA INFO */
  .job-row{
    display:flex; justify-content: space-between; gap:10px;
    font-size: 1rem; font-weight: 600; opacity: .98;
    padding: 8px 0 2px; border-top: 1px solid rgba(255,255,255,.25);
  }

  /* FOOTER */
  .job-ft{
    display:flex; align-items:center; gap:8px; margin-top: 10px;
    font-size: .95rem; opacity: .95;
  }
  .job-ft .dot{
    width:10px; height:10px; border-radius:50%;
    background:#fff; box-shadow: var(--shadow-soft);
  }
  /* dot com a cor do estado */
  .status-NE .job-ft .dot{ background: var(--status-NE); }
  .status-VE .job-ft .dot{ background: var(--status-VE); }
  .status-ST .job-ft .dot{ background: var(--status-ST); }

  /* Botão + Novo Serviço fixo (se usares) */
  .fab-add{
    position: fixed; left: 16px; right:16px; bottom: 18px;
    padding: 14px 16px; border-radius: 14px; border: none;
    font-weight: 800; font-size: 1.05rem; color:#fff;
    background: linear-gradient(90deg,#16a34a,#22c55e);
    box-shadow: 0 12px 26px rgba(22,163,74,.36);
  }
}
